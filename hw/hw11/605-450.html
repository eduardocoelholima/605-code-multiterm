<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Wed Nov  6 10:43:08 2024 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>605-450.html</title>

</head>


<b><font size="+1">31.3. Homework 11.3 (10 Points)</font>
<a name="31.3. Homework 11.3 (10 Points)"></a>
</b>


<p style="margin-top: 1em"><b>Objective:</b> Understanding
of wait and notify and notifyAll</p>

<p style="margin-top: 1em"><b>Grading:</b> <br>
Correctness: You can lose up to 40% if your solution is not
correct <br>
Quality: You can lose up to 80% if your solution is poorly
designed <br>
Testing: You can lose up to 50% if your solution is not well
tested <br>
Explanation: You can lose up to 100% if your solution if you
can not explain your solution during the grading session</p>

<p style="margin-top: 1em"><b>Homework Description:</b></p>

<p style="margin-top: 1em"><b>Explanation:</b></p>

<p style="margin-top: 1em">The objective of test and if
needed correct the implementation of a program generated by
ChatGPT.</p>

<p style="margin-top: 1em"><b>Your Work:</b></p>

<p style="margin-top: 1em">You have to test the
implementation of a program generated by ChatGPT and fix the
code if needed.</p>

<p style="margin-top: 1em">ChatGPT was asked: <i>to write a
java program simulating n producer and k consumer.</i>
ChatGPT produced the following file:</p>

<pre style="margin-top: 1em">           1      import java.util.LinkedList;
           2      import java.util.Queue;
           3
           4      class SharedBuffer {
           5          private final Queue&lt;Integer&gt; buffer = new LinkedList&lt;&gt;();
           6          private final int limit;
           7
           8          public SharedBuffer(int limit) {
           9              this.limit = limit;
          10          }
          11
          12          public synchronized void produce(int value) throws InterruptedException {
          13              while (buffer.size() == limit) {
          14                  System.out.println(&quot;Producer woke up, but no space left.&quot;);
          15                  wait(); // Wait until there is space in the buffer
          16              }
          17              buffer.add(value);
          18              System.out.println(&quot;Produced: &quot; + value);
          19              notifyAll(); // Notify consumers that there is an item available
          20          }
          21
          22          public synchronized int consume() throws InterruptedException {
          23              while (buffer.isEmpty()) {
          24                  System.out.println(&quot;Consumer woke up, but nothing there to consume.&quot;);
          25                  wait(); // Wait until there is an item to consume
          26              }
          27              int value = buffer.poll();
          28              System.out.println(&quot;Consumed: &quot; + value);
          29              notifyAll(); // Notify producers that there is space in the buffer
          30              return value;
          31          }
          32      }
          33
          34      class Producer implements Runnable {
          35          private final SharedBuffer buffer;
          36
          37          public Producer(SharedBuffer buffer) {
          38              this.buffer = buffer;
          39          }
          40
          41          @Override
          42          public void run() {
          43              try {
          44                  for (int i = 0; i &lt; 10; i++) {
          45                      buffer.produce(i);
          46                  }
          47              } catch (InterruptedException e) {
          48                  Thread.currentThread().interrupt();
          49              }
          50          }
          51      }
          52
          53      class Consumer implements Runnable {
          54          private final SharedBuffer buffer;
          55
          56          public Consumer(SharedBuffer buffer) {
          57              this.buffer = buffer;
          58          }
          59
          60          @Override
          61          public void run() {
          62              try {
          63                  for (int i = 0; i &lt; 10; i++) {
          64                      buffer.consume();
          65                  }
          66              } catch (InterruptedException e) {
          67                  Thread.currentThread().interrupt();
          68              }
          69          }
          70      }
          71
          72      public class ProducerConsumerExample {
          73          public static void main(String[] args) {
          74              SharedBuffer buffer = new SharedBuffer(5); // Buffer size of 5
          75
          76              for ( int index = 0; index &lt; 2; index ++ )      {
          77                      new Thread(new Producer(buffer)).start();
          78                      new Thread(new Consumer(buffer)).start();
          79              }
          80          }
          81      }
          82</pre>


<p style="margin-top: 1em">Source Code:
<a href="https://www.cs.rit.edu/~hpb/Lectures/2241/605/Src/31/ProducerConsumerExample.java">Src/31/ProducerConsumerExample.java</a></p>

<p style="margin-top: 1em">Unfortunately consumer or
producers are notified and they can not perform their task,
because the buffer is empty or full.</p>

<p style="margin-top: 1em">An example output would be:</p>

<pre style="margin-top: 1em">          ava ProducerConsumerExample
          Produced: 0
            ...
<b>          Producer woke up, but no space left.
</b>          Consumed: 2
            ...
          Consumer woke up, but nothing there to consume.
            ...</pre>


<p style="margin-top: 1em">The line in bold fontface should
not be printed.</p>

<p style="margin-top: 1em">Change this program so such a
producer can always produce if notified, and consumer can
always consume if notified. Additionally k producer and n
consumer have to be part of this simulation.</p>

<p style="margin-top: 1em">You cannot rewrite the complete
program.</p>

<p style="margin-top: 1em"><b>Submission:</b></p>

<p style="margin-top: 1em">You have to submit a text file
for each parts of the hw (1, 2, 3) named
&rsquo;addition.txt&rsquo; with the following
information:</p>

<p style="margin-top: 1em">&bull; Describe the main problem
you saw.</p>

<p style="margin-top: 1em">&bull; Describe the main idea
behind your solution.</p>

<p style="margin-top: 1em">&bull; Add comment to the code
if you made assumption about the write-up of the hw.</p>

<p style="margin-top: 1em">&bull; Descripe your test cases,
if applicable.</p>

<p style="margin-top: 1em">&bull; Describe the edge cases
you tested, if applicable.</p>

<p style="margin-top: 1em">&bull; Describe all ways your
program can be executed.</p>

<p style="margin-top: 1em">&bull; You need to disclose if
you have used generative AI. In other words, you have to
identify code wich was generated by generative AI. Failing
to do so will result in a &rsquo;F&rsquo; grade for the
course.</p>

<p style="margin-top: 1em">Utilize myCourses for file
submissions, and note that each team is allowed only one
submission. Your solutions should be submitted in a
compressed jar file format and containing the java classes
and associated files. Here&rsquo;s an example of how to
create and compress such a file:</p>

<pre style="margin-top: 1em">          % jar cvf h1.jar Celtic.class Celtic.java addition.txt
          added manifest
          adding: Celtic.class(in = 1989) (out= 1113)(deflated 44%)
          adding: Celtic.java(in = 2650) (out= 943)(deflated 64%)
          adding: addition.txt(in = 4639) (out= 1998)(deflated 56%)
          % gzip -fv h1.jar
          h1.jar:         3.1% -- replaced with h1.jar.gz
             #  -f --force           force overwriting &amp; compress links
             #  -v --verbose         print extra statistics</pre>


<p style="margin-top: 1em">Please ensure that the suffix of
your file matches the specified format. The file should have
a prefix &rsquo;h&rsquo; followed by the number of the
homework. For instance, if you are submitting the solution
for homework 5, the file name has to be h5.jar.</p>

<p style="margin-top: 1em"><b>You will receive 0 points for
your submission, if you use a format different than
jar.</b></p>
<hr size=4>
